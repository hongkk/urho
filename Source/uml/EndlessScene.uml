<?xml version="1.0" encoding="UTF-8"?>
<XPD:PROJECT xmlns:XPD="http://www.staruml.com" version="1">
<XPD:HEADER>
<XPD:SUBUNITS>
</XPD:SUBUNITS>
<XPD:PROFILES>
</XPD:PROFILES>
</XPD:HEADER>
<XPD:BODY>
<XPD:OBJ name="DocumentElement" type="UMLProject" guid="/QCScTPIG0+qZ/yqgbRUjAAA">
<XPD:ATTR name="Title" type="string">EndlessScene</XPD:ATTR>
<XPD:ATTR name="#OwnedElements" type="integer">1</XPD:ATTR>
<XPD:OBJ name="OwnedElements[0]" type="UMLModel" guid="+W5APx+prkW1p9JhXq7EQwAA">
<XPD:ATTR name="Name" type="string">Scene</XPD:ATTR>
<XPD:ATTR name="InnerName" type="string">Scene</XPD:ATTR>
<XPD:REF name="Namespace">/QCScTPIG0+qZ/yqgbRUjAAA</XPD:REF>
<XPD:ATTR name="#OwnedDiagrams" type="integer">1</XPD:ATTR>
<XPD:OBJ name="OwnedDiagrams[0]" type="UMLClassDiagram" guid="f8vDfbCppkq2kjcOjIKUMQAA">
<XPD:ATTR name="Name" type="string">EndlessScene</XPD:ATTR>
<XPD:REF name="DiagramOwner">+W5APx+prkW1p9JhXq7EQwAA</XPD:REF>
<XPD:OBJ name="DiagramView" type="UMLClassDiagramView" guid="1j8wszyrHEOMvsfXGS9oFAAA">
<XPD:REF name="Diagram">f8vDfbCppkq2kjcOjIKUMQAA</XPD:REF>
<XPD:ATTR name="#OwnedViews" type="integer">27</XPD:ATTR>
<XPD:OBJ name="OwnedViews[0]" type="UMLNoteView" guid="eXfJPslhX0+U1wAsTLs3QwAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Left" type="integer">3276</XPD:ATTR>
<XPD:ATTR name="Top" type="integer">884</XPD:ATTR>
<XPD:ATTR name="Width" type="integer">431</XPD:ATTR>
<XPD:ATTR name="Height" type="integer">503</XPD:ATTR>
<XPD:ATTR name="Text" type="string">EndlessScene::EndlessScene()
{
        this-&gt;createComponent&lt;Octree&gt;()-&gt;setTemporary(true);
        this-&gt;createComponent&lt;DebugRenderer&gt;()-&gt;setTemporary(true);
        this-&gt;createComponent&lt;Baking&gt;()-&gt;setTemporary(true);
        //this-&gt;createComponent&lt;EffectCache&gt;()-&gt;setTemporary(true);
        this-&gt;createComponent&lt;AvatarCache&gt;()-&gt;setTemporary(true);
        this-&gt;createComponent&lt;DecalGroup&gt;()-&gt;setTemporary(true);
        this-&gt;createComponent&lt;BakeModelGroup&gt;()-&gt;setTemporary(true);
        this-&gt;createComponent&lt;GrassWindAgentManager&gt;()-&gt;setTemporary(true);
        this-&gt;createComponent&lt;EndlessPather&gt;()-&gt;setTemporary(true);
        this-&gt;createComponent&lt;EndlessSceneLoader&gt;()-&gt;setTemporary(true);
        PhysicsWorld * physicsWorld = this-&gt;createComponent&lt;PhysicsWorld&gt;();

        mSceneEffect = this-&gt;createComponent&lt;EndlessSceneEffect&gt;();

        mAvatarEnvironment = this-&gt;createComponent&lt;EndlessAvatarEnvironment&gt;();

        mZoneNode = this-&gt;createChild(&quot;ZoneNode&quot;);
        mZone = mZoneNode-&gt;createComponent&lt;EndlessZone&gt;();

        mMainCameraNode = this-&gt;createChild(&quot;MainCameraNode&quot;);
        mMainCamera = mMainCameraNode-&gt;createComponent&lt;Camera&gt;();

        mMainLightNode = this-&gt;createChild(&quot;MainLightNode&quot;);
        mMainLight = mMainLightNode-&gt;createComponent&lt;Light&gt;();

        mTerrainGroup = new EndlessTerrainGroup(mContext);

        mWaterGroup = new EndlessWaterGroup(mContext);

        mTerrainGridGroup = new TerrainGridGroup(mContext);
}
</XPD:ATTR>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[1]" type="UMLNoteView" guid="Ttbq4kdAkEWUda1JOEz+swAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Left" type="integer">3932</XPD:ATTR>
<XPD:ATTR name="Top" type="integer">1532</XPD:ATTR>
<XPD:ATTR name="Width" type="integer">431</XPD:ATTR>
<XPD:ATTR name="Height" type="integer">548</XPD:ATTR>
<XPD:ATTR name="Text" type="string">bool EndlessScene::loadFromXml(Deserializer&amp; source)
{
        source.seek(0);
        XMLFile xml(mContext);
        if (!xml.load(source, Resource::EMTITY_PARAMS))
                return false;
        XMLElement RootEmt = xml.getRoot();
        //读取场景属性
        CoreUtil::loadPropertiesFromXmlElement(this, RootEmt);
        CoreUtil::loadParamsFromXmlElement(this, RootEmt);
        //保读取主灯光参数
        XMLElement MainLightNodeEmt = RootEmt.getChild(&quot;MainLightNode&quot;);
        mMainLightNode-&gt;loadSelfFromXML(MainLightNodeEmt);
        XMLElement MainLightEmt = MainLightNodeEmt.getChild(&quot;MainLight&quot;);
        mMainLight-&gt;loadXML(MainLightEmt);
        //读取烘焙属性
        XMLElement BakingEmt = RootEmt.getChild(&quot;Baking&quot;);
        CoreUtil::loadPropertiesFromXmlElement(getComponent&lt;Baking&gt;(), BakingEmt);
        //读取地形定义
        XMLElement TerrainGroupEmt = RootEmt.getChild(&quot;TerrainGroup&quot;);
        mTerrainGroup-&gt;loadXML(TerrainGroupEmt);
        //读取水域定义
        XMLElement WaterGroupEmt = RootEmt.getChild(&quot;WaterGroup&quot;);
        mWaterGroup-&gt;loadXML(WaterGroupEmt);
        //读取分区定义
        XMLElement AreaDescsEmt = RootEmt.getChild(&quot;AreaDescs&quot;);
        XMLElement AreaDescEmt = AreaDescsEmt.getChild(&quot;AreaDesc&quot;);
        while (AreaDescEmt)
        {
                AreaDesc desc;
                mAreaDescs.push(desc);
        }
        //读取Avatar 环境
        XMLElement AvatarEnvironmentEmt = RootEmt.getChild(&quot;AvatarEnvironment&quot;);
        mAvatarEnvironment-&gt;loadXML(AvatarEnvironmentEmt);
}
</XPD:ATTR>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[2]" type="UMLNoteLinkView" guid="EsXBsrw/n0StU0R9w2WSmwAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Points" type="Points">3932,1585;3706,1354</XPD:ATTR>
<XPD:REF name="Head">eXfJPslhX0+U1wAsTLs3QwAA</XPD:REF>
<XPD:REF name="Tail">Ttbq4kdAkEWUda1JOEz+swAA</XPD:REF>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[3]" type="UMLNoteView" guid="33IHxnB43EmwEUg1wwFe4QAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Left" type="integer">3308</XPD:ATTR>
<XPD:ATTR name="Top" type="integer">1512</XPD:ATTR>
<XPD:ATTR name="Width" type="integer">390</XPD:ATTR>
<XPD:ATTR name="Height" type="integer">188</XPD:ATTR>
<XPD:ATTR name="Text" type="string">EndlessArea* EndlessScene::createArea(int x, int z,bool force)
{
        EndlessArea* area = C_NEW EndlessArea(x, z, this, mContext);
        AreaID id = calculateAreaID(x, z);
        area-&gt;setNavigationMeshDebugDraw(mNavigationMeshDebugDraw);
        this-&gt;addChild(area);
        if (mLightmapsEnabled)
                area-&gt;setLightmapsEnabled(true);
        area-&gt;setPagedEnabled(mAreaPagedEnabled);
        mAreas.insert(makePair(id, SharedPtr&lt;EndlessArea&gt;(area)));
        return area;
}
</XPD:ATTR>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[4]" type="UMLNoteLinkView" guid="+CNax65Dn0Gcc8u6PTtM4gAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Points" type="Points">3500,1512;3497,1386</XPD:ATTR>
<XPD:REF name="Head">eXfJPslhX0+U1wAsTLs3QwAA</XPD:REF>
<XPD:REF name="Tail">33IHxnB43EmwEUg1wwFe4QAA</XPD:REF>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[5]" type="UMLNoteView" guid="276VAu4pO0WaT7udGHBZ5QAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Left" type="integer">2784</XPD:ATTR>
<XPD:ATTR name="Top" type="integer">1244</XPD:ATTR>
<XPD:ATTR name="Width" type="integer">327</XPD:ATTR>
<XPD:ATTR name="Height" type="integer">143</XPD:ATTR>
<XPD:ATTR name="Text" type="string">//场景加载辅助类
EndlessSceneLoader

///注入位置
void EndlessSceneLoader::injectPosition(const Vector3&amp; pos)
{
//根据位置查找对应的Area,如果该Area还没加载
//则开始对该Area进行异步加载，记录加载状态和发送消息
}
</XPD:ATTR>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[6]" type="UMLNoteLinkView" guid="HkpsKJ3FI0WyKj7J5QIdlwAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="LineStyle" type="LineStyleKind">lsRectilinear</XPD:ATTR>
<XPD:ATTR name="Points" type="Points">2911,1520;2911,1386</XPD:ATTR>
<XPD:REF name="Head">276VAu4pO0WaT7udGHBZ5QAA</XPD:REF>
<XPD:REF name="Tail">SJgG+o73cU+OvimpFBp9jwAA</XPD:REF>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[7]" type="UMLNoteView" guid="SJgG+o73cU+OvimpFBp9jwAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Left" type="integer">2780</XPD:ATTR>
<XPD:ATTR name="Top" type="integer">1520</XPD:ATTR>
<XPD:ATTR name="Width" type="integer">358</XPD:ATTR>
<XPD:ATTR name="Height" type="integer">173</XPD:ATTR>
<XPD:ATTR name="Text" type="string">EndlessArea* EndlessScene::loadArea(int x, int z, unsigned loadFlags)
{
        EndlessArea* area = getArea(x, z);
        if (!area)
                area = createArea(x, z);
        if (area &amp;&amp; !area-&gt;load(loadFlags))
        {
                C_LOG_ERROR(&quot;area load error. X: %d Z: %d&quot;, x, z);
        }
        return area;
}
</XPD:ATTR>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[8]" type="UMLNoteLinkView" guid="ihuM5P+KU0GEWkCwhMbOWQAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Points" type="Points">3308,1605;3137,1605</XPD:ATTR>
<XPD:REF name="Head">SJgG+o73cU+OvimpFBp9jwAA</XPD:REF>
<XPD:REF name="Tail">33IHxnB43EmwEUg1wwFe4QAA</XPD:REF>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[9]" type="UMLNoteView" guid="5rDvIjqJ3kO15WxJN5xnigAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Left" type="integer">3344</XPD:ATTR>
<XPD:ATTR name="Top" type="integer">1840</XPD:ATTR>
<XPD:ATTR name="Width" type="integer">321</XPD:ATTR>
<XPD:ATTR name="Height" type="integer">248</XPD:ATTR>
<XPD:ATTR name="Text" type="string">bool EndlessArea::loadImpl(EndlessAreaResource * resource)
{
        //加载同名光照图信息，必须在对象信息加载前加载
        loadLightmaps();

        loadFromXml(resource)

        loadTerrain();
        loadWater();
        //加载同名导航网格
        loadNavMesh();
        // 通知avatar 环境进行更新。
        mScene-&gt;getAvatarEnvironment()-&gt;onAreaLoaded(this);
        //启用烘焙信息
        setLightmapsEnabled();
}
</XPD:ATTR>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[10]" type="UMLNoteLinkView" guid="e0SC+zPy70qNylcktH25aAAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Points" type="Points">3503,1840;3502,1699</XPD:ATTR>
<XPD:REF name="Head">33IHxnB43EmwEUg1wwFe4QAA</XPD:REF>
<XPD:REF name="Tail">5rDvIjqJ3kO15WxJN5xnigAA</XPD:REF>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[11]" type="UMLNoteView" guid="KNRviNQ7mEW27YkEB4ccpQAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Left" type="integer">2600</XPD:ATTR>
<XPD:ATTR name="Top" type="integer">1752</XPD:ATTR>
<XPD:ATTR name="Width" type="integer">528</XPD:ATTR>
<XPD:ATTR name="Height" type="integer">98</XPD:ATTR>
<XPD:ATTR name="Text" type="string">bool EndlessArea::loadLightmapsFromFile(const String&amp; filename)
{
        ResourceCache* cache = getSubsystem&lt;ResourceCache&gt;();
        //mLightmaps = cache-&gt;getResource&lt;EndlessLightmaps&gt;(filename);
        return mLightmaps-&gt;loadFile(cache-&gt;getResourceFileName(filename), Resource::EMTITY_PARAMS);
}
</XPD:ATTR>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[12]" type="UMLNoteLinkView" guid="77sqZR/Tyk+g4c7T9EMiogAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="LineStyle" type="LineStyleKind">lsRectilinear</XPD:ATTR>
<XPD:ATTR name="Points" type="Points">3127,1824;3236,1824;3236,1920;3344,1920</XPD:ATTR>
<XPD:REF name="Head">5rDvIjqJ3kO15WxJN5xnigAA</XPD:REF>
<XPD:REF name="Tail">KNRviNQ7mEW27YkEB4ccpQAA</XPD:REF>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[13]" type="UMLNoteView" guid="ksTPEbsqakCTz4/aPu7qJwAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Left" type="integer">3492</XPD:ATTR>
<XPD:ATTR name="Top" type="integer">2240</XPD:ATTR>
<XPD:ATTR name="Width" type="integer">318</XPD:ATTR>
<XPD:ATTR name="Height" type="integer">113</XPD:ATTR>
<XPD:ATTR name="Text" type="string">bool EndlessArea::loadTerrain()
{
        EndlessTerrainGroup* terrainGroup = getTerrainGroup();
        if (!terrainGroup)
                return false;
        return terrainGroup-&gt;loadTerrain(mX, mZ);
}
</XPD:ATTR>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[14]" type="UMLNoteLinkView" guid="mcCZsW8AeE61bIs18OSQtgAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="LineStyle" type="LineStyleKind">lsRectilinear</XPD:ATTR>
<XPD:ATTR name="Points" type="Points">3652,2240;3652,2148;3492,2148;3492,2087</XPD:ATTR>
<XPD:REF name="Head">5rDvIjqJ3kO15WxJN5xnigAA</XPD:REF>
<XPD:REF name="Tail">ksTPEbsqakCTz4/aPu7qJwAA</XPD:REF>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[15]" type="UMLNoteView" guid="0HbHxh1cQk+gdc/8kbe4SAAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Left" type="integer">3152</XPD:ATTR>
<XPD:ATTR name="Top" type="integer">2240</XPD:ATTR>
<XPD:ATTR name="Width" type="integer">306</XPD:ATTR>
<XPD:ATTR name="Height" type="integer">113</XPD:ATTR>
<XPD:ATTR name="Text" type="string">bool EndlessArea::loadWater()
{
        EndlessWaterGroup* waterGroup = getWaterGroup();
        if (!waterGroup)
                return false;
        return waterGroup-&gt;loadWater(mX, mZ);
}
</XPD:ATTR>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[16]" type="UMLNoteLinkView" guid="bSYtICSgzk2jcxQ6Bn3dnAAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="LineStyle" type="LineStyleKind">lsRectilinear</XPD:ATTR>
<XPD:ATTR name="Points" type="Points">3308,2240;3308,2148;3492,2148;3492,2087</XPD:ATTR>
<XPD:REF name="Head">5rDvIjqJ3kO15WxJN5xnigAA</XPD:REF>
<XPD:REF name="Tail">0HbHxh1cQk+gdc/8kbe4SAAA</XPD:REF>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[17]" type="UMLNoteView" guid="j2anz6SjUUigsowpdlEwzQAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Left" type="integer">2788</XPD:ATTR>
<XPD:ATTR name="Top" type="integer">1960</XPD:ATTR>
<XPD:ATTR name="Width" type="integer">329</XPD:ATTR>
<XPD:ATTR name="Height" type="integer">68</XPD:ATTR>
<XPD:ATTR name="Text" type="string">bool EndlessArea::loadNavMeshFromFile(const String&amp; filename)
{
        return mNavigationMesh-&gt;load(filename);
}
</XPD:ATTR>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[18]" type="UMLNoteLinkView" guid="HWRyQqcxDUGU8Iywof7XXwAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="LineStyle" type="LineStyleKind">lsRectilinear</XPD:ATTR>
<XPD:ATTR name="Points" type="Points">3116,1993;3236,1993;3236,1920;3344,1920</XPD:ATTR>
<XPD:REF name="Head">5rDvIjqJ3kO15WxJN5xnigAA</XPD:REF>
<XPD:REF name="Tail">j2anz6SjUUigsowpdlEwzQAA</XPD:REF>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[19]" type="UMLNoteView" guid="qhouQ6Cm30G3CJZLZAEQngAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Left" type="integer">3532</XPD:ATTR>
<XPD:ATTR name="Top" type="integer">2576</XPD:ATTR>
<XPD:ATTR name="Width" type="integer">404</XPD:ATTR>
<XPD:ATTR name="Height" type="integer">428</XPD:ATTR>
<XPD:ATTR name="Text" type="string">bool EndlessTerrain::load()
{
        EndlessScene* scene = dynamic_cast&lt;EndlessScene*&gt;(getScene());
        mTerrain = this-&gt;createComponent&lt;Terrain&gt;();

        mMaterial = SharedPtr&lt;Material&gt;(C_NEW Material(mContext));
        mMaterial-&gt;setTechniqueName(0, &quot;Techniques/TerrainBlend.tech&quot;);
        mMaterial-&gt;setTextureType(TU_ENVIRONMENT, TT_2D);

        mMaterial-&gt;setTexture(TU_DIFFUSE, mDiffuse);
        mMaterial-&gt;setTexture(TU_NORMAL, mNormal);
        mTerrain-&gt;setMaterial(mMaterial);

        //读取混合图
        loadBlendMap(mBlendMapName, mAsyncLoad);
        //读取高度图
        loadHeightMap(mHeightMapName, mAsyncLoad);

        mTerrain-&gt;setFlags(ENF_Terrain);
        mTerrain-&gt;setCastShadows(mCastShadows);

        for (ConstIterator i = mGrassNodes.begin(); i != mGrassNodes.end(); ++i)
        {
                Node* grassNode = *i;
                Grass* grass = grassNode-&gt;getComponent&lt;Grass&gt;();
                grass-&gt;load();
        }
}
</XPD:ATTR>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[20]" type="UMLNoteView" guid="FDd53SoQuU22dmheON5TNgAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Left" type="integer">3552</XPD:ATTR>
<XPD:ATTR name="Top" type="integer">2396</XPD:ATTR>
<XPD:ATTR name="Width" type="integer">260</XPD:ATTR>
<XPD:ATTR name="Height" type="integer">128</XPD:ATTR>
<XPD:ATTR name="Text" type="string">bool EndlessTerrainGroup::loadTerrain(int x, int z)
{
        EndlessTerrain* terrain = getTerrain(x, z);
        if (!terrain)
                return false;

        return terrain-&gt;load();
}
</XPD:ATTR>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[21]" type="UMLNoteLinkView" guid="mWsRa8E/l0CKDBb+S7TUNQAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Points" type="Points">3669,2396;3661,2352</XPD:ATTR>
<XPD:REF name="Head">ksTPEbsqakCTz4/aPu7qJwAA</XPD:REF>
<XPD:REF name="Tail">FDd53SoQuU22dmheON5TNgAA</XPD:REF>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[22]" type="UMLNoteLinkView" guid="0A0rvj78vkS2IlMfu9puHQAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Points" type="Points">3699,2576;3691,2523</XPD:ATTR>
<XPD:REF name="Head">FDd53SoQuU22dmheON5TNgAA</XPD:REF>
<XPD:REF name="Tail">qhouQ6Cm30G3CJZLZAEQngAA</XPD:REF>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[23]" type="UMLNoteView" guid="dPC16R7hZ0inYnL4pJmU2wAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Left" type="integer">3140</XPD:ATTR>
<XPD:ATTR name="Top" type="integer">2400</XPD:ATTR>
<XPD:ATTR name="Width" type="integer">252</XPD:ATTR>
<XPD:ATTR name="Height" type="integer">128</XPD:ATTR>
<XPD:ATTR name="Text" type="string">bool EndlessWaterGroup::loadWater(int x, int z)
{
        EndlessWater* water = getWater(x, z);
        if (!water)
                return false;

        return water-&gt;load();
}
</XPD:ATTR>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[24]" type="UMLNoteLinkView" guid="3kqG5IkrtUmdA+GUC+vfqQAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Points" type="Points">3280,2400;3291,2352</XPD:ATTR>
<XPD:REF name="Head">0HbHxh1cQk+gdc/8kbe4SAAA</XPD:REF>
<XPD:REF name="Tail">dPC16R7hZ0inYnL4pJmU2wAA</XPD:REF>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[25]" type="UMLNoteView" guid="q1LzH1FXX0eKu43+3An/BwAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Left" type="integer">3056</XPD:ATTR>
<XPD:ATTR name="Top" type="integer">2644</XPD:ATTR>
<XPD:ATTR name="Width" type="integer">316</XPD:ATTR>
<XPD:ATTR name="Height" type="integer">143</XPD:ATTR>
<XPD:ATTR name="Text" type="string">bool EndlessWater::load()
{
        mWater = this-&gt;createComponent&lt;Water&gt;();

        mWater-&gt;setMaterial(getWaterGroup()-&gt;getMaterial());

        //加载高度图
        loadHeightMap(mHeightMapName, mAsyncLoad);
}
</XPD:ATTR>
</XPD:OBJ>
<XPD:OBJ name="OwnedViews[26]" type="UMLNoteLinkView" guid="lpULI15fqkuNAL78EKR/IwAA">
<XPD:ATTR name="LineColor" type="string">clMaroon</XPD:ATTR>
<XPD:ATTR name="FillColor" type="string">$00B9FFFF</XPD:ATTR>
<XPD:ATTR name="Points" type="Points">3228,2644;3252,2527</XPD:ATTR>
<XPD:REF name="Head">dPC16R7hZ0inYnL4pJmU2wAA</XPD:REF>
<XPD:REF name="Tail">q1LzH1FXX0eKu43+3An/BwAA</XPD:REF>
</XPD:OBJ>
</XPD:OBJ>
</XPD:OBJ>
</XPD:OBJ>
</XPD:OBJ>
</XPD:BODY>
</XPD:PROJECT>
